<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>neural.afni - Wrapper methods for AFNI functions &mdash; NeurAL 0.3 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="NeurAL 0.3 documentation" href="index.html" />
    <link rel="next" title="neural.dicom - Functions to interact with DICOM images" href="dicom.html" />
    <link rel="prev" title="Welcome to NeurAL’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dicom.html" title="neural.dicom - Functions to interact with DICOM images"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to NeurAL’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">NeurAL 0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to NeurAL&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dicom.html"
                        title="next chapter">neural.dicom - Functions to interact with DICOM images</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/afni.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="neural-afni-wrapper-methods-for-afni-functions">
<h1>neural.afni - Wrapper methods for AFNI functions<a class="headerlink" href="#neural-afni-wrapper-methods-for-afni-functions" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-neural.afni"></span><p>wrapper functions for common AFNI tasks</p>
<dl class="class">
<dt id="neural.afni.DsetInfo">
<em class="property">class </em><tt class="descclassname">neural.afni.</tt><tt class="descname">DsetInfo</tt><a class="reference internal" href="_modules/neural/afni.html#DsetInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neural.afni.DsetInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>contains organized output from <tt class="docutils literal"><span class="pre">3dinfo</span></tt></p>
<p>All lists are returned in RAI order (i.e., a list of 3 numbers refers to the R-L axis,
A-P axis, then I-S axis)</p>
</dd></dl>

<dl class="class">
<dt id="neural.afni.temp_afni_copy">
<em class="property">class </em><tt class="descclassname">neural.afni.</tt><tt class="descname">temp_afni_copy</tt><big>(</big><em>in_dset</em>, <em>out_dsets=None</em><big>)</big><a class="reference internal" href="_modules/neural/afni.html#temp_afni_copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neural.afni.temp_afni_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>used within a <tt class="docutils literal"><span class="pre">with</span></tt> block, will create a temporary <tt class="docutils literal"><span class="pre">+orig</span></tt> copy of dataset</p>
<p>When invoked in a <tt class="docutils literal"><span class="pre">with</span></tt> block, will make a <tt class="docutils literal"><span class="pre">+orig</span></tt> copy of the given dataset
and return the filename as a string.</p>
<p>On exiting the block, it will delete the <tt class="docutils literal"><span class="pre">+orig</span></tt> copy. If out_dsets is a string
or list of strings, it will try to make nifti copies of all datasets listed 
and then delete the original version if successful. AFNI datasets should be specified
with the <tt class="docutils literal"><span class="pre">+view</span></tt>.</p>
<dl class="docutils">
<dt>Example usage::</dt>
<dd><dl class="first last docutils">
<dt>with temp_afni_copy(&#8216;dataset.nii.gz&#8217;) as dset_afni:</dt>
<dd>do_something_with_a_dset(dset_afni)</dd>
<dt>with temp_afni_copy(&#8216;dataset.nii.gz&#8217;,&#8217;output_dataset+orig&#8217;) as dset_afni:</dt>
<dd>do_something_with_a_dset(dset_afni,output=&#8217;output_dataset&#8217;)</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="neural.afni.Decon">
<em class="property">class </em><tt class="descclassname">neural.afni.</tt><tt class="descname">Decon</tt><a class="reference internal" href="_modules/neural/afni.html#Decon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neural.afni.Decon" title="Permalink to this definition">¶</a></dt>
<dd><p>wrapper for AFNI 3dDeconvolve command</p>
<dl class="docutils">
<dt>Properties:</dt>
<dd><table class="first docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">input_dset:</th><td class="field-body">list of input datasets</td>
</tr>
<tr class="field-even field"><th class="field-name">stim_files:</th><td class="field-body">dictionary where keys are used as stimulus labels
and the values are taken as 1D files</td>
</tr>
<tr class="field-odd field"><th class="field-name">stim_times:</th><td class="field-body">same as stim_files, but used as a stim_times file</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">stim_times_model:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">default model to use for each stim_times</td>
</tr>
<tr class="field-odd field"><th class="field-name">stim_base:</th><td class="field-body">list of names of stimuli (defined either in stim_files or 
stim_times) that should be considered in the baseline instead
of full model</td>
</tr>
<tr class="field-even field"><th class="field-name">stim_am1:</th><td class="field-body">list of names of stimuli defined in stim_times that should
use the <tt class="docutils literal"><span class="pre">-stim_times_AM1</span></tt> model</td>
</tr>
<tr class="field-odd field"><th class="field-name">stim_am2:</th><td class="field-body">list of names of stimuli defined in stim_times that should
use the <tt class="docutils literal"><span class="pre">-stim_times_AM2</span></tt> model</td>
</tr>
<tr class="field-even field"><th class="field-name">glts:</th><td class="field-body">dictionary where keys are GLT labels, and the value
is a symbolic statement</td>
</tr>
<tr class="field-odd field"><th class="field-name">mask:</th><td class="field-body">either a mask file, or &#8220;auto&#8221;, which will use &#8220;-automask&#8221;</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Options that are obvious:</dt>
<dd>nfirst (default: 3), censor_file, polort (default: &#8216;A&#8217;), tout, vout, rout, prefix</dd>
</dl>
<p>opts            = list of extra things to put in the command</p>
<p><strong>Example:</strong>:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">decon</span> <span class="o">=</span> <span class="n">neural</span><span class="o">.</span><span class="n">afni</span><span class="o">.</span><span class="n">Decon</span><span class="p">()</span>
<span class="n">decon</span><span class="o">.</span><span class="n">input_dsets</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dset_run1.nii.gz&#39;</span><span class="p">,</span> <span class="s">&#39;dset_run2.nii.gz&#39;</span><span class="p">]</span>
<span class="n">decon</span><span class="o">.</span><span class="n">censor_file</span> <span class="o">=</span> <span class="s">&#39;subject_censor.1D&#39;</span>
<span class="n">decon</span><span class="o">.</span><span class="n">stim_files</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;motion_1&#39;</span><span class="p">:</span> <span class="s">&#39;motion_file.1D[0]&#39;</span><span class="p">,</span>
        <span class="s">&#39;motion_2&#39;</span><span class="p">:</span> <span class="s">&#39;motion_file.1D[1]&#39;</span><span class="p">,</span>
        <span class="s">&#39;motion_3&#39;</span><span class="p">:</span> <span class="s">&#39;motion_file.1D[2]&#39;</span><span class="p">,</span>
        <span class="s">&#39;motion_4&#39;</span><span class="p">:</span> <span class="s">&#39;motion_file.1D[3]&#39;</span><span class="p">,</span>
        <span class="s">&#39;motion_5&#39;</span><span class="p">:</span> <span class="s">&#39;motion_file.1D[4]&#39;</span><span class="p">,</span>
        <span class="s">&#39;motion_6&#39;</span><span class="p">:</span> <span class="s">&#39;motion_file.1D[5]&#39;</span>
<span class="p">}</span>
<span class="n">decon</span><span class="o">.</span><span class="n">stim_base</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;motion_</span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">)]</span>
<span class="n">decon</span><span class="o">.</span><span class="n">stim_times</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;stim_a&#39;</span><span class="p">:</span> <span class="s">&#39;stim_a.stimtimes&#39;</span><span class="p">,</span>
        <span class="s">&#39;stim_b&#39;</span><span class="p">:</span> <span class="s">&#39;stim_b.stimtimes&#39;</span><span class="p">,</span>
        <span class="s">&#39;stim_c&#39;</span><span class="p">:</span> <span class="s">&#39;stim_c.stimtimes&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">decon</span><span class="o">.</span><span class="n">glts</span> <span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;a-b&#39;</span><span class="p">:</span> <span class="s">&#39;1*stim_a + -1*stim_b&#39;</span><span class="p">,</span>
        <span class="s">&#39;ab-c&#39;</span><span class="p">:</span> <span class="s">&#39;0.5*stim_a + 0.5*stim_b + -1*stim_c&#39;</span>
<span class="p">}</span>
<span class="n">decon</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="s">&#39;subject_decon.nii.gz&#39;</span>
<span class="n">decon</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="method">
<dt id="neural.afni.Decon.command_list">
<tt class="descname">command_list</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/neural/afni.html#Decon.command_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neural.afni.Decon.command_list" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the 3dDeconvolve command as a list</p>
<p>The list returned can be run by passing it into a subprocess-like command
(e.g., neural.utils.run())</p>
</dd></dl>

<dl class="method">
<dt id="neural.afni.Decon.command_string">
<tt class="descname">command_string</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/neural/afni.html#Decon.command_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neural.afni.Decon.command_string" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the 3dDeconvolve command as as string</p>
<p>This command can then be run in something like a shell script</p>
</dd></dl>

<dl class="method">
<dt id="neural.afni.Decon.run">
<tt class="descname">run</tt><big>(</big><em>working_directory='.'</em><big>)</big><a class="reference internal" href="_modules/neural/afni.html#Decon.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#neural.afni.Decon.run" title="Permalink to this definition">¶</a></dt>
<dd><p>runs 3dDeconvolve through the neural.utils.run shortcut</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dicom.html" title="neural.dicom - Functions to interact with DICOM images"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to NeurAL’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">NeurAL 0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Bill Gross.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>